#!/usr/bin/make -f
# -*- makefile -*-

#export DH_VERBOSE=1
export DH_OPTIONS

%:
	dh $@ --parallel --with autoreconf

override_dh_auto_configure:
	dh_auto_configure -- --with-hfst --without-xfst --enable-spellers --enable-hyperminimisation --enable-alignment --enable-minimised-spellers --enable-syntax --enable-analysers --enable-generators --enable-apertium

override_dh_auto_build:
	mkdir -p debian/tmp/locale/
	localedef -f UTF-8 -i en_US ./debian/tmp/locale/en_US.UTF-8/
	export LOCPATH=$(CURDIR)/debian/tmp/locale/ && \
	export LC_ALL=en_US.UTF-8 && \
	dh_auto_build

override_dh_auto_install:
	dh_auto_install
	grep -v '^libdir=' debian/tmp/usr/share/pkgconfig/giella-kal.pc > debian/tmp/usr/share/pkgconfig/giella-kal.pc.new
	mv -v debian/tmp/usr/share/pkgconfig/giella-kal.pc.new debian/tmp/usr/share/pkgconfig/giella-kal.pc
	cp -av debian/tmp/usr/lib/*/voikko debian/usr/share/ && rm -rfv debian/tmp/usr/lib/*/voikko
